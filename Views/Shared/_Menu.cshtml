
@inject Microsoft.AspNetCore.Identity.UserManager<FiwFriends.Models.User> UserManager

@{
    var user = await UserManager.GetUserAsync(User);

    // เช็คว่ามีรูปไหม ถ้ามีให้แปลงเป็น Base64 URL
    string profilePicUrl = user?.ProfilePic != null
        ? $"data:image/png;base64,{Convert.ToBase64String(user.ProfilePic)}"
        : "https://ultrasabers.com/wp-content/uploads/2018/05/DarthVader.jpg"; // ถ้าไม่มีรูป ใช้รูป default
}


<div class="menu">

        <div class="profile-container">
                <div class="profile-img" style="background-image: url('@profilePicUrl');"></div>
                
                <div class="profile-info">
                        <h2 class="username">@user?.UserName</h2>
                        <p class="name">@user?.FirstName @user?.LastName</p>
                        <p class="contact">@user?.Contact</p>
                </div>
                
        </div>
        
        <div class="menu-container">

                <a class="menu-edit_profile" asp-controller="User" asp-action="Edit" >
                        <div class="edit-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" height="25" viewBox="0 -960 960 960" width="25" fill="#000">
                                <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h357l-80 80H200v560h560v-278l80-80v358q0 33-23.5 56.5T760-120H200Zm280-360ZM360-360v-170l367-367q12-12 27-18t30-6q16 0 30.5 6t26.5 18l56 57q11 12 17 26.5t6 29.5q0 15-5.5 29.5T897-728L530-360H360Zm481-424-56-56 56 56ZM440-440h56l232-232-28-28-29-28-231 231v57Zm260-260-29-28 29 28 28 28-28-28Z"/>
                        </svg>
                        Edit Profile
                        </div>
                </a>
                
                <a class="menu-btn menu-home" class="menu-home" asp-controller="Post" asp-action="Index">
                        <svg xmlns="http://www.w3.org/2000/svg" height="35" viewBox="0 -960 960 960" width="35" fill="#000">
                                <path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"/>
                        </svg>
                        Home
                </a>

                <a class="menu-btn menu-status" asp-controller="User" asp-action="UserInboxStatus">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="35px" height="35px">
                                <circle cx="17" cy="8" r="4" fill="currentColor"/>
                                <path fill="currentColor" fill-rule="evenodd" clip-rule="evenodd" d="M15 8a2 2 0 1 1 4 0h-4ZM11 8a6 6 0 0 1 .34-2H5a1 1 0 0 0 0 2h6ZM11.8 11a6 6 0 0 0 1.88 2H5a1 1 0 1 1 0-2h6.8ZM5 16a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2H5Z"/>
                        </svg>
                        Status
                </a>

                <a class="menu-btn menu-like" asp-controller="Post" asp-action="GetFavoritedPost">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="35px" height="35px">
                                <path d="M4.45067 13.9082L11.4033 20.4395C11.6428 20.6644 11.7625 20.7769 11.9037 20.8046C11.9673 20.8171 12.0327 20.8171 12.0963 20.8046C12.2375 20.7769 12.3572 20.6644 12.5967 20.4395L19.5493 13.9082C21.5055 12.0706 21.743 9.0466 20.0978 6.92607L19.7885 6.52734C17.8203 3.99058 13.8696 4.41601 12.4867 7.31365C12.2913 7.72296 11.7087 7.72296 11.5133 7.31365C10.1304 4.41601 6.17972 3.99058 4.21154 6.52735L3.90219 6.92607C2.25695 9.0466 2.4945 12.0706 4.45067 13.9082Z"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Likes
                </a>

                <a class="menu-btn menu-my_post" asp-controller="User" asp-action="MyPost">
                        <svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg" width="35px" height="35px">
                                <path d="M5 21C5 17.134 8.13401 14 12 14C15.866 14 19 17.134 19 21M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z" 
                                stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="white"/>
                        </svg>
                        My post
                </a>

                <form class="menu-logout" method="post" asp-controller="Auth" asp-action="Logout">
                        
                        <button type="submit" class="logout-btn">
                                <div class="align-center">
                                        <svg viewBox="0 2 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="30px" height="30px">
                                                <path d="M15 4H5v14a2 2 0 0 0 2 2h8" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                                <path d="M16 15l3-3-3-3M19 12H9" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>

                                        Logout
                                </div>
                                
                        </button>
                </form>

        </div>
</div>
